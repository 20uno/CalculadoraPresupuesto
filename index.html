<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Presupuesto de Casa</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
/* === ESTILOS SIN CAMBIOS RELEVANTES === */
body {
    font-family: 'Roboto', sans-serif;
    background: linear-gradient(rgba(74,60,49,0.9), rgba(74,60,49,0.9)),
    url('https://www.transparenttextures.com/patterns/fallen-leaves.png');
    max-width: 900px;
    margin: 0 auto;
    padding: 40px 20px;
    color: #f5e8c7;
}
body.light-mode {
    background: linear-gradient(rgba(255,250,240,0.9), rgba(255,250,240,0.9)),
    url('https://www.transparenttextures.com/patterns/fallen-leaves.png');
    color: #4a3c31;
}
.section {
    background: #3d5a36;
    padding: 35px;
    border-radius: 15px;
}
body.light-mode .section {
    background: #fffaf0;
}
label { display:block; margin-top:20px; }
select,input,textarea { width:100%; padding:10px; border-radius:6px; }
button { margin-top:20px; padding:14px; width:100%; cursor:pointer; }
#resultado { margin-top:30px; padding:20px; border-radius:10px; background:#5c7557; }
body.light-mode #resultado { background:#fdf5e6; }
footer { text-align:center; margin-top:40px; }
</style>
</head>

<body>

<div class="section">
<button onclick="toggleTheme()">üåì</button>

<h2>Calculadora de Presupuesto de Casa</h2>
<p>Estimaci√≥n de costos de construcci√≥n ‚Äì 2026</p>

<label>Tipo de Construcci√≥n</label>
<select id="tipo_construccion">
    <option value="13000">Accesible (MXN$13,000/m¬≤)</option>
    <option value="18000" selected>Balanceado (MXN$18,000/m¬≤)</option>
    <option value="24000">Residencial (MXN$24,000/m¬≤)</option>
</select>

<label>Rec√°maras</label>
<select id="recamaras"><option>1</option><option selected>2</option><option>3</option></select>
<label>Tama√±o rec√°mara (m¬≤)</label>
<select id="tamano_recamaras"><option>12</option><option selected>15</option><option>20</option></select>

<label>Salas</label>
<select id="salas"><option selected>1</option><option>2</option></select>
<label>Tama√±o sala (m¬≤)</label>
<select id="tamano_salas"><option selected>25</option><option>30</option></select>

<label>Cocinas</label>
<select id="cocinas"><option selected>1</option><option>2</option></select>
<label>Tama√±o cocina (m¬≤)</label>
<select id="tamano_cocinas"><option selected>12</option><option>15</option></select>

<label>Ba√±os</label>
<select id="banos"><option>1</option><option selected>2</option></select>
<label>Tama√±o ba√±o (m¬≤)</label>
<select id="tamano_banos"><option selected>6</option><option>8</option></select>

<label>Garajes</label>
<select id="garajes"><option>0</option><option selected>1</option></select>
<label>Tama√±o garaje (m¬≤)</label>
<select id="tamano_garajes"><option selected>20</option><option>30</option></select>

<label>Patios / Jardines</label>
<select id="patios"><option>0</option><option selected>1</option></select>
<label>Tama√±o patio (m¬≤)</label>
<select id="tamano_patios"><option selected>30</option><option>40</option></select>

<label>Terrazas</label>
<select id="terrazas"><option selected>0</option><option>1</option></select>
<label>Tama√±o terraza (m¬≤)</label>
<select id="tamano_terrazas"><option selected>15</option><option>20</option></select>

<label>% Circulaci√≥n</label>
<input type="range" id="circulacion" min="10" max="25" value="15">

<label>% Imprevistos</label>
<input type="range" id="imprevistos" min="0" max="10" value="4">

<button onclick="calcularPresupuesto()">Calcular</button>
<button onclick="exportarPDF()">Exportar PDF</button>

<div id="resultado"></div>
</div>

<footer>
<p>¬© 2026 Calculadora de Presupuesto de Casa</p>
</footer>

<script>
function toggleTheme(){
    document.body.classList.toggle('light-mode');
}

function formatear(n){
    return n.toLocaleString('es-MX',{minimumFractionDigits:2});
}

function calcularPresupuesto(){
    const tipo = +tipo_construccion.value;

    const m2Rec = recamaras.value * tamano_recamaras.value;
    const m2Sal = salas.value * tamano_salas.value;
    const m2Coc = cocinas.value * tamano_cocinas.value;
    const m2Ban = banos.value * tamano_banos.value;
    const m2Gar = garajes.value * tamano_garajes.value;
    const m2Pat = patios.value * tamano_patios.value;
    const m2Ter = terrazas.value * tamano_terrazas.value;

    const circulacionPct = circulacion.value / 100;
    const imprevPct = imprevistos.value / 100;

    const m2Cir = circulacionPct * (m2Rec + m2Sal + m2Coc + m2Ban + m2Gar);

    const factorExterior = 0.35;

    const m2Interior = m2Rec + m2Sal + m2Coc + m2Ban + m2Gar + m2Cir;
    const costoInterior = m2Interior * tipo;
    const costoPatios = m2Pat * tipo * factorExterior;

    const presupuestoBase = costoInterior + costoPatios;
    const imprevistosCosto = presupuestoBase * imprevPct;
    const total = presupuestoBase + imprevistosCosto;

    resultado.innerHTML = `
    <strong>√Årea total interior:</strong> ${formatear(m2Interior)} m¬≤<br>
    <strong>Patios/Jardines:</strong> ${formatear(m2Pat)} m¬≤ (factor 0.35)<br><br>

    <strong>Costo construcci√≥n interior:</strong> $${formatear(costoInterior)}<br>
    <strong>Costo patios/jardines:</strong> $${formatear(costoPatios)}<br>
    <strong>Imprevistos:</strong> $${formatear(imprevistosCosto)}<br><br>

    <strong>Presupuesto total estimado:</strong> $${formatear(total)} MXN<br><br>

    <em>Nota: Costos estimados para M√©xico en 2026. Valores pueden variar seg√∫n ubicaci√≥n y condiciones. Referencias: CMIC.</em>
    `;
}

function exportarPDF(){
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.text(document.getElementById('resultado').innerText, 10, 10);
    doc.save('Presupuesto_Casa_2026.pdf');
}
</script>

</body>
</html>
